import { oceanicNext } from '@code-surfer/themes';
import { CodeSurfer, CodeSurferColumns, Step } from 'code-surfer';
import { themes } from 'mdx-deck';

import Head from './components/Head';
import { COLUMN_THEMES } from './constants';

import './styles/overrides.css';
import './styles/styles.css';

export const theme = themes.notes;

<Head title="Svelte for React Devs" />

<!-- Slides Start -->

# Svelte for React Devs

#### UI Meetup - 19th Apr 2021

###### By Phani Rahul Sivalenka [@rahulsivalenka](https://twitter.com/rahulsivalenka)

---

This talk introduces Svelte to React devs.

---

### Building Blocks

---

<CodeSurferColumns themes={COLUMN_THEMES}>

<Step>

```jsx subtitle="component is a JavaScript function"
// App.js
export default function App() {
  let name = 'React';

  return (
    <p>
      Here's a good ol'{' '}
      <span
        style={{
          color: '#61DAFB',
        }}
      >
        {name}
      </span>{' '}
      component.
    </p>
  );
}
```

```html subtitle="component is written as plain HTML"
<!-- App.svelte -->
<script>
  let name = 'Svelte';
</script>

<!-- html goes here -->
<p>There's a new kid in town. It's name is <span>{name}</span>.</p>

<style>
  span {
    color: #ff3e00;
  }
</style>
```

</Step>

<Step title="HTML">

```diff 6:16 subtitle="returns HTML to be rendered using JSX syntax"

```

```diff 6:7 subtitle="the component itself is the HTML"

```

</Step>

<Step title="CSS">

```diff 9:11 subtitle="can style using inline style object or CSS-in-JS solutions or CSS modules or plain CSS file"

```

```diff 8:13 subtitle="styles are written in a style tag"

```

</Step>

<Step title="JS">

```diff 3 subtitle="JavaScript goes directly in the component's function body"

```

```diff 2:5 subtitle="JavaScript goes under a script tag"

```

</Step>

</CodeSurferColumns>

---

### State

---

<CodeSurferColumns themes={COLUMN_THEMES}>

<Step>

```jsx subtitle="direct assignments to the state won't work"
// App.js
export default function App() {
  let name = 'React';

  const handleChangeName = () => {
    name = `why is the name not changing?!! ðŸ˜¡`;
  };

  return (
    <>
      <p>{name}</p>
      <button onClick={handleChangeName}>Change Name</button>
    </>
  );
}
```

```html subtitle="direct assignments work to change the state"
<!-- App.svelte -->
<script>
  let name = 'Svelte';
  const handleChangeName = () => {
    name = 'name changes by simple assignment!! Super Cool! ðŸ˜Ž';
  };
</script>

<!-- html goes here -->
<p>{name}</p>
<button on:click="{handleChangeName}">Change Name</button>
```

</Step>

<Step>

```jsx 3,6 subtitle="need to call a setter method to update state"
// App.js
export default function App() {
  const [name, setName] = React.useState('React');

  const handleChangeName = () => {
    setName(`lot of work for a simple state update ðŸ˜¢`);
  };

  return (
    <>
      <p>{name}</p>
      <button onClick={handleChangeName}>Change Name</button>
    </>
  );
}
```

```diff 3,5 subtitle="direct assignments work to change the state"

```

</Step>

<Step>

```diff 3 subtitle="state is defined using a special hook called useState"

```

```diff 3 subtitle="state is defined using normal javascript variable declaration"

```

</Step>

</CodeSurferColumns>

---

### Props

---

<CodeSurferColumns themes={COLUMN_THEMES}>

<Step>

```jsx 2[29:36] subtitle="props are extracted from the object passed into the component's constructor"
// App.js
export default function App({ name }) {
  return <p>{name}</p>;
}
```

```html 3 subtitle="props are exposed using export keyword"
<!-- App.svelte -->
<script>
  export let name;
</script>

<p>{name}</p>
```

</Step>

<Step>

```jsx 2[29:50] subtitle="default values for props can be given while destructuring"
// App.js
export default function App({ name = 'a mystery' }) {
  return <p>{name}</p>;
}
```

```html 3 subtitle="default values for props can be given in the declaration"
<!-- App.svelte -->
<script>
  export let name = 'a mystery';
</script>

<p>{name}</p>
```

</Step>

<Step title="props are sent in the same way for both React and Svelte">

```jsx
<App name="Batman" />

<App name={'Batman'} />

<App name={42} />

<App {...propsObject} />
```

</Step>

</CodeSurferColumns>

---

### Computed State

---

<CodeSurferColumns themes={COLUMN_THEMES}>

<Step>

```jsx 8:10 subtitle="useEffect is run everytime firstName or lastName change to recompute fullName"
// App.js
export default function App() {
  const [firstName, setFirstName] = useState('Bruce');
  const [lastName, setLastName] = useState('Wayne');

  const [fullName, setFullName] = useState('Wayne');

  React.useEffect(() => {
    setFullName(`${firstName} ${lastName}`);
  }, [firstName, lastName]);

  return <h2>{fullName}</h2>;
}
```

```html 6 subtitle="using reactive declarations ($:) fullName is recomputed everytime firstName or lastName change"
<!-- App.svelte -->
<script>
  let firstName = 'Bruce';
  let lastName = 'Wayne';

  $: fullName = `${firstName} ${lastName}`;
</script>

<h2>{fullName}</h2>
```

</Step>

</CodeSurferColumns>

---

<CodeSurferColumns themes={[COLUMN_THEMES[1], COLUMN_THEMES[1], COLUMN_THEMES[1]]}>

<Step title="Svelte: reactivity" subtitle="We're not limited to declaring reactive values â€” we can also run arbitrary statements reactively.">

```html 3
// App.svelte
<script>
  $: console.log(`the count is ${count}`);
</script>
```

```html 3:6
// App.svelte
<script>
  $: {
    console.log(`the count is ${count}`);
    alert(`I SAID THE COUNT IS ${count}`);
  }
</script>
```

```html 3:6
// App.svelte
<script>
  $: if (count >= 10) {
    alert(`count is dangerously high!`);
    count = 9;
  }
</script>
```

</Step>

</CodeSurferColumns>

---

<CodeSurferColumns themes={[COLUMN_THEMES[1]]}>

<Step title="Svelte: reactivity" subtitle="Because Svelte's reactivity is triggered by assignments, using array methods like push and splice won't automatically cause updates">

```html 6,9
// App.svelte
<script>
  let numbers = [1, 2, 3, 4];

  function addNumber() {
    numbers.push(numbers.length + 1);
  }

  $: sum = numbers.reduce((t, n) => t + n, 0);
</script>

<p>{numbers.join(' + ')} = {sum}</p>

<button on:click="{addNumber}">Add a number</button>
```

</Step>

<Step title="Svelte: reactivity" subtitle="relies on immutability">

```html
// App.svelte
<script>
  let numbers = [1, 2, 3, 4];

  function addNumber() {
    numbers = [...numbers, numbers.length + 1];
  }

  $: sum = numbers.reduce((t, n) => t + n, 0);
</script>

<p>{numbers.join(' + ')} = {sum}</p>

<button on:click="{addNumber}">Add a number</button>
```

</Step>

</CodeSurferColumns>

---

Thank You
